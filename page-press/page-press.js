const fs=require("fs"),path=require("path");let cache={};function cachedReadFileSync(e){if(cache[e])return cache[e]+"";{let r=fs.readFileSync(e);return cache[e]=r,r+""}}function pagePress(e,r,n){r.render=function(e,n,a){return new Promise(c=>{let t;try{t=cachedReadFileSync(e)}catch(r){throw new Error("Unable to read template: "+e)}for(key in n){let e=n[key];t=t.replace(new RegExp(key,"g"),e)}if(fs.existsSync(e+".lang")){let r;null==a&&(a="default");try{r=JSON.parse(cachedReadFileSync(e+".lang"))[a]}catch(r){throw new Error("Error parsing the language file: "+e+".lang")}if(r)for(key in r){let e=r[key];t=t.replace(new RegExp(key,"g"),e)}}r.end(t),c()})},n()}module.exports=pagePress;